## 0. PRD 기본 규칙

- 본 문서는 **시스템 행동 요구사항**만을 정의한다
- UI, 화면, 버튼, UX 표현은 포함하지 않는다
- 본 문서는 `scope.md`를 절대적으로 따른다
- 명시되지 않은 기능은 **구현 대상이 아니다**

---

## 1. User (사용자)

### 1.1 사용자 생성

- 시스템은 이메일 기반 사용자를 생성한다
- 이메일은 사용자 식별자이다
- 실명 정보는 저장하지 않는다

### 1.2 사용자 조회

- 시스템은 사용자 정보를 조회할 수 있어야 한다
- 조회 범위는 기본 사용자 정보로 제한한다

### 1.3 사용자 수정

- 시스템은 사용자 정보를 수정할 수 있어야 한다
- 인증 정보(이메일)는 수정 대상이 아니다

### 1.4 사용자 상태

- 사용자는 활성 상태를 가진다
- 차단된 사용자는 시스템 행위를 제한받는다

### 1.5 로그인 (MVP)

- 시스템은 세션 기반 인증을 위한 더미 로그인 기능을 제공한다
- 로그인은 이메일 기반이며, 비밀번호/휴대폰/실명 인증은 제공하지 않는다
- 로그인 성공 시 세션이 생성되어 이후 요청에서 인증이 유지된다

차단(BLOCKED) 사용자 제한 (MVP 고정)

- 차단된 사용자는 **쓰기/상태변경 액션을 수행할 수 없다**
- 쓰기/상태변경 액션 예:
    - 모임 생성/수정/취소/종료(ENDED 전환)
    - 참여 요청/승인/거절
    - 후기 생성
    - 모임 공지/메시지 생성
    - 신고/차단 생성
- 차단된 사용자는 최소한의 조회/세션 관련 행위만 허용한다

---

## 2. Dog (반려견)

### 2.1 반려견 생성

- 시스템은 사용자에 종속된 반려견을 생성한다
- 반려견 생성 시 성향 프로필 입력은 필수다
- 사용자당 반려견 수 제한은 없다

### 2.2 반려견 성향 프로필

- 성향 프로필은 **고정된 질문/항목 집합**으로 구성된다
- 성향 프로필은 반려견의 속성이다
- 성향 프로필 항목 예:
    - 견종(breed)
    - 크기(size)
    - 중성화 여부(neutered)
    - 사회성(sociability_level)
    - 공격성/반응성(reactivity_level)
    - 특이사항(notes)

### 2.3 반려견 수정

- 시스템은 반려견 기본 정보 및 성향 프로필을 수정할 수 있어야 한다

---

## 3. Meetup (모임)

### 4.1 모임 생성

- 시스템은 사용자가 모임을 생성할 수 있도록 한다
- 모임은 다음 정보를 가진다:
    - 시간
    - 장소(텍스트)
    - 최대 참여 인원

### 4.2 모임 조회

- 시스템은 모임 정보를 조회할 수 있어야 한다
- 조회 시 반려견 성향 기반 필터링을 제공해야 한다
- 필터링은 사용자 선택 조건이며 자동 추천은 현재 제공하지 않음

반려견 성향 기반 필터링 (MVP 최소 조건 고정)

- 필터링은 다음 항목만을 사용한다:
    - 반려견 크기(dogs.size)
    - 사회성(dogs.sociability_level)
    - 반응성(dogs.reactivity_level)

필터 조건 결합 규칙 (MVP)

- 필터는 AND 조건이다 (지정된 필터는 모두 만족해야 한다)
- 지정되지 않은 필터 항목은 조건에서 제외한다

### 4.3 모임 상태

- 모임은 상태를 가진다
    - 모집중
    - 종료됨
    - 취소됨

종료(ENDED) 전환 방식 (MVP 고정)

- 모임의 종료됨 상태 전환은 **자동 전환이 아니라 수동 행위로만** 수행한다
- 종료됨 전환은 **모임 생성자(호스트)만** 수행할 수 있다

### 4.4 모임 수정

- 시스템은 모임 정보를 수정할 수 있어야 한다
- 종료된 모임은 수정할 수 없다

---

## 4. Participation (참여)

### 5.1 참여 요청

- 시스템은 사용자가 모임 참여를 요청할 수 있도록 한다
- 참여는 자동 승인되지 않는다

### 5.2 참여 승인

- 시스템은 모임 생성자가 참여 요청을 승인할 수 있도록 한다

### 5.3 참여 거절

- 시스템은 모임 생성자가 참여 요청을 거절할 수 있도록 한다

### 5.4 참여 상태

- 참여는 상태를 가진다:
    - 요청됨
    - 승인됨
    - 거절됨

### 5.5 후기 (참여 기반)

- 후기는 **감정적 신뢰/관계 형성**을 위한 기능이 아니라, 모임 참여 판단을 돕기 위한 제한된 피드백이다
- 후기는 참여(Participation)를 기준으로 생성된다
- 후기 작성 가능 조건:
    - 모임 상태가 종료됨이어야 한다
    - 후기 작성자는 해당 참여의 당사자(모임 생성자 또는 참여 사용자)여야 한다
- 후기 제약:
    - 참여 1건당 작성자별 후기 1개만 허용한다
    - 참여자 간(참여자 ↔ 참여자) 후기는 MVP에서 제공하지 않는다
- 후기 입력:
    - 평점(rating): 1~5
    - 내용(content): 선택
- 후기 조회(최소 요구):
    - 모임 생성자는 참여 승인/거절 판단을 위해 참여 요청자의 기존 후기 요약을 조회할 수 있어야 한다
    - 후기 요약은 단순 집계(건수, 평균)로 충분하며, 복잡한 평판/가중치는 제공하지 않는다

- 후기 조회 범위 제한 (MVP):
    - 후기는 모임 생성자(참여 승인/거절 판단 목적) 및 후기 당사자(작성자/피작성자)만 조회 가능하다
    - 공개 프로필 후기(로그인 사용자 누구나 조회)는 MVP에서 제공하지 않는다

---

## 5. Communication (모임 단위 커뮤니케이션)

### 6.1 모임 공지

- 시스템은 모임 단위의 공지 메시지를 생성할 수 있어야 한다

### 6.2 메시지 범위 제한

- 메시지는 모임 단위로만 존재한다
- 개인 간 직접 메시지는 제공하지 않는다

---

## 6. Safety (안전 기능)

### 7.1 신고

- 시스템은 사용자가 다른 사용자를 신고할 수 있도록 한다

### 7.2 차단

- 시스템은 사용자를 차단할 수 있도록 한다
- 차단된 사용자는 일부 행위가 제한된다

---

## 7. 공통 제약

### 8.1 추론 금지

- 본 PRD에 명시되지 않은 기능은 구현하지 않는다

### 8.2 자동화 금지

- 추천, 자동 승인, 자동 매칭은 제공하지 않는다
